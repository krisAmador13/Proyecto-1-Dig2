#include <Arduino.h>
#include <stdint.h>
#include "driver/adc.h"
#include "driver/ledc.h"

//Definimos lo relacionado al PWM
#define PMW1_Pin 13
#define PWM2_Pin 12
#define PWM3_Pin 14
#define PWM4_Pin 27
int res = 10;
int freq = 50;

//Definimos variables relacionadas con el ADC
#define ref_Pin 25
int width = 10;
float valor_A=0;
float valor_D=0;


//definimos pines de entrada 
#define sensor_T 32
#define bot_T 33
//Definimos algunas salidas 
#define LED_rojo 18
#define LED_verde 19
#define LED_azul 21
#define servo 5

//Definimos algunas variables para interrupciones 
unsigned long bot_T_lastlL=0;
unsigned long t_rebote = 60;

//Definimos las funciones de PWM
void initPWM1();
void initPWM2();
void initPWM3();
void initPWM4();

//Definimos función de ADC
void initADC();

//Establecemos la función de inicio de los PWM
void initPWM1(void){
ledcSetup(PWM1_Pin, freq, res);//Establecemos la señal PWM para servo 
ledcAttachPin(servo, PWM1_Pin); //Le mandamos la señal de PWM al servo 
}
void initPWM2(void){
ledcSetup(PWM2_Pin, freq, res);//Establecemos la señal PWM para led
ledcAttachPin(LED_rojo, PWM2_Pin); //Le mandamos la señal de PWM al led rojo 
}
void initPWM3(void){
ledcSetup(PWM3_Pin, freq, res);//Establecemos la señal PWM para led
ledcAttachPin(LED_verde, PWM3_Pin); //Le mandamos la señal de PWM al led verde
}
void initPWM4(void){
ledcSetup(PWM4_Pin, freq, res);//Establecemos la señal PWM para led
ledcAttachPin(LED_azul, PWM4_Pin); //Le mandamos la señal de PWM al led azul 
}
void initADC(void){
analogSetWidth(width);
analogSetVRefPin(ref_Pin);
valor_A= analogReadMilliVolts(sensor_T);
valor_D= map(valor_A, 0, 1023, 0, 37.5);
}


